---
title: 数据库范式和函数依赖
tags:
  - sql
categories:
  - 1-编程语言
  - sql
abbrlink: 2e33702e
date: 2019-12-10 21:11:46
---



### 1. 函数依赖

##### 1.1 函数依赖(有我就能决定你)

设X,Y是关系R的两个属性集合，当任何时刻R中的任意两个元组中的X属性值相同时，则它们的Y属性值也相同，则称X函数决定Y，或Y函数依赖于X。

<!-- more -->

##### 1.2. 平凡函数依赖(我决定的值还是我自己内部, 走不出自我, 于是平凡的我)

当关系中属性集合Y是属性集合X的子集时(Y⊆X)，存在函数依赖X→Y，即一组属性函数决定它的所有子集，这种函数依赖称为平凡函数依赖。

##### 1.3 非平凡函数依赖(我决定的值大千世界)

当关系中属性集合Y不是属性集合X的子集时，存在函数依赖X→Y，则称这种函数依赖为非平凡函数依赖。

##### 1.4. 完全函数依赖 (我要和别人一起决定你)

设X,Y是关系R的两个属性集合，X’是X的真子集，存在X→Y，但对每一个X’都有X’!→Y，则称Y完全函数依赖于X。

##### 1.5. 部分函数依赖(我的一部分就能决定你)

设X,Y是关系R的两个属性集合，存在X→Y，若X’是X的真子集，存在X’→Y，则称Y部分函数依赖于X。

##### 1.6. 传递函数依赖 (决定的传递关系)

设X,Y,Z是关系R中互不相同的属性集合，存在X→Y(Y !→X),Y→Z，则称Z传递函数依赖于X。



### 2. 属性关系

属性之间有三种关系，但并不是每一种关系都存在函数依赖。设R(U)是属性集U上的关系模式，X、Y是U的子集：

● 如果X和Y之间是1：1关系（一对一关系），如学校(X)和校长(Y)之间就是1:1关系，则存在函数依赖X → Y和Y →X。

● 如果X和Y之间是1：n关系（一对多关系），如年龄(X)和姓名(Y)之间就是1:n关系，则存在函数依赖Y → X。

●如果X和Y之间是m：n关系（多对多关系），如学生(X)和课程(Y)之间就是m:n关系，则X和Y之间不存在函数依赖。



### 3. 范式

关系数据库有六种，一、二、三、四、五和BC。

##### 3.1 1NF (问题: 同字段内容重复, 要拆表->2NF)

如果关系模式R是第一范式的模式，那么，R的每一个关系r的属性都是原子项，不可分割。

1NF是关系模式应具备的最起码的条件，如果数据库设计不能满足第一范式，就不能称为关系型数据库。

关系数据库自带1NF



##### 3.2 2NF (问题: 非主属性不同字段之间关联, 要拆表->3NF)

如果关系模式R是1NF，且每一个非主属性完全依赖于候选建，那么就称R是第二范式。

第二范式要满足的条件：首先要满足第一范式，其次每一个非主属性要**完全函数**依赖于候选键，或者是主键。也就是说，每个非主属性是由整个主键函数决定的，而不能有主键的一部分来决定。



##### 3.3 3NF (问题: 主属性不同字段之间关联, 要拆表->BCNF)

如果关系模式R是2NF，且关系模式R（U,F）中的所有非主属性对任何候选关键字都不存在传递依赖，则称关系R是属于第三范式。

第三范式（3NF）；符合2NF，并且，消除传递依赖。



##### 3.4 BCNF

符合3NF，并且，主属性不依赖于主属性。若关系模式R属于第一范式，且每个属性都不传递依赖于键码，则R属于BC范式。



在某些特殊情况下，即使关系模式符合 3NF 的要求，仍然存在着插入异常，修改异常与删除异常的问题，仍然不是 ”好“ 的设计。

造成此问题的原因：存在着主属性对于码的部分函数依赖与传递函数依赖。



##### 3.5 总结

应用的范式越高，则表越多。表多会带来很多问题：1 查询时要连接多个表，增加了查询的复杂度. 2 查询时需要连接多个表，降低了数据库查询性能

所以有的时候需要应用反范式化

+ 2NF在1NF的基础之上，消除了**非主属性**对于码的部分函数依赖。
+ 3NF在2NF的基础之上，消除了**非主属性**对于码的传递函数依赖。
+ BCNF 在3NF的基础上，消除**主属性**对于码的部分与传递函数依赖。



### 4. 其他概念

##### 4.1 码

设 K 为某表中的一个属性或属性组，若除 K 之外的所有属性都完全函数依赖于 K（这个“完全”不要漏了），那么我们称 K 为**候选码**，简称为**码**。在实际中我们通常可以理解为：假如当 K 确定的情况下，该表除 K 之外的所有属性的值也就随之确定，那么 K 就是码。一张表中可以有超过一个码。（实际应用中为了方便，通常选择其中的一个码作为主码）

##### 4.2 主属性

包含在任何一个码中的属性成为主属性。非主属性反之.



### 5. 参考资料

+ https://www.zhihu.com/question/24696366
+ https://www.cnblogs.com/rosesmall/p/9585655.html